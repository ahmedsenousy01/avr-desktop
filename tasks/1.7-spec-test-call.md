## Implementation Spec — Test Call

Implementation Order: 7

### Overview

Provide a simple flow to verify end-to-end audio/ASR/LLM/TTS for a running deployment.

### Goals

- Make it obvious how to run a basic validation call.

### Functional Requirements

1. Display dial instructions (endpoint/SIP URI, credentials, port).
2. Detect call arrival in dialplan and pipeline traversal.
3. Show short transcript and synthesized response sample.
4. Optional: internal originate via ARI/AMI loopback.

### UI/UX

- Action button on running deployment; modal with steps and live status.

### Data & Persistence

- Store last test result summary in deployment folder (JSON).

### IPC/Backend

- IPC hooks into Asterisk (ARI/AMI) or log parsing to confirm flow.

### Out of Scope

- Call recording repository.

### Open Questions

- Prefer external softphone vs internal originate for MVP.

### Notes

- Implementation planning will use the Generate Task List rule in `rules/`.

### Flow

1. Start deployment.
2. Show SIP endpoint (from `pjsip.conf`) and credentials.
3. User dials from softphone; app detects call (logs or ARI/AMI).
4. Display short transcript/response and pass/fail verdict.

### IPC API

- `testCall:start` → initializes detection and UI; returns dial info
- `testCall:observe` → event stream of call states and transcript snippets

### Acceptance Criteria

- Clear, copyable dial instructions.
- Successful call shows transcript and synthesized reply sample.
- Failure paths show actionable hints (e.g., port blocked, auth failure).

### Tasks Outline

- Implement detection via logs or ARI/AMI (whichever is simpler first).
- Build UI modal with live status and summary.

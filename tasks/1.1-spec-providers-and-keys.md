## Implementation Spec — Providers & Keys

Implementation Order: 1

### Overview

Forms to collect provider credentials (OpenAI, Anthropic, Google/Gemini, Deepgram, ElevenLabs, etc.), store in local JSON, and reuse across deployments.

### Goals

- Centralize provider settings.
- JSON persistence; no .env files.

### Functional Requirements

1. Add/edit/remove keys per provider with minimal validation.
2. Persist to a global JSON file under the workspace.
3. Expose read access for compose generation and templates.

### UI/UX

- Simple forms per provider, masked inputs, copy/test actions.

### Data & Persistence

- File: `workspace/providers.json`.

### IPC/Backend

- IPC to read/write provider settings.

### Validation

- Presence/format checks; optional live key ping where feasible.

### Out of Scope

- Encrypted storage (MVP).

### Open Questions

- File naming and folder for workspace root.

### Notes

- Implementation planning will use the Generate Task List rule in `rules/`.

### Data Model (providers.json)

```json
{
  "openai": { "apiKey": "" },
  "anthropic": { "apiKey": "" },
  "google": { "apiKey": "", "projectId": "", "region": "" },
  "deepgram": { "apiKey": "" },
  "elevenlabs": { "apiKey": "" },
  "ultravox": { "apiKey": "" },
  "openaiRealtime": { "apiKey": "" }
}
```

### IPC API

- `providers:list` → returns full providers object
- `providers:get` → returns provider by key
- `providers:save` → upsert providers object (validates structure)
- `providers:test` → optional non-blocking key validation per provider

### Renderer Components

- `ProvidersPage` (list of providers with edit buttons)
- `ProviderForm` (per-provider form with masked inputs)

### Acceptance Criteria

- Saving valid keys writes to `workspace/providers.json` and is immediately readable.
- Keys are masked by default and can be revealed/copied.
- Optional “Test key” returns success/failure without blocking the UI.

### Tasks Outline

- Build providers JSON schema and type definitions.
- Implement IPC read/write/test handlers with input validation.
- Create UI forms for each provider defined in examples.
- Wire composer/templates to consume provider values at compose-generation time.
